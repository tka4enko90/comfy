jQuery((function(a){AutomateWoo.Variables={$meta_box:a("#aw_variables_box"),init:function(){this.init_clipboard(),a(document.body).on("change keyup",".aw-workflow-variable-parameter",this.update_preview_field),a(document.body).on("keypress","input.aw-workflow-variable-parameter",this.restrict_parameter_chars),this.$meta_box.on("click",".aw-workflow-variable",this.open_modal)},init_clipboard:function(){new ClipboardJS(".aw-clipboard-btn",{text:function(e){return a("#aw_workflow_variable_preview_field").text()}}).on("success",(function(e){a(".aw-clipboard-btn").html("Copied!"),setTimeout((function(){AutomateWoo.Modal.close()}),500)}))},open_modal:function(){AutomateWoo.Modal.open("ajax"),AutomateWoo.Modal.loading();var e={action:"aw_modal_variable_info",variable:a(this).text()};a.post(ajaxurl,e,(function(a){AutomateWoo.Modal.contents(a),AutomateWoo.Variables.update_preview_field()}))},update_preview_field:function(){var e=a("#aw_workflow_variable_preview_field"),t=e.data("variable"),o=[];a(".aw-workflow-variable-parameter").each((function(){var e=a(this).parents(".aw-workflow-variables-parameter-row:first");if(e.data("parameter-show")){var t=e.data("parameter-show").split("="),r=a('.aw-workflow-variable-parameter[name="'+t[0]+'"]');if(!r.length||r.val()!=t[1])return void e.hide();e.show()}var i={name:a(this).attr("name"),required:e.data("is-required"),value:a(this).val()};o.push(i)}));var r=AutomateWoo.Variables.generate_variable_string(t,o);e.text(r),AutomateWoo.Modal.position()},generate_variable_string:function(e,t){var o="{{ "+e;if(t.length){var r=[];a.each(t,(function(a,e){e.value?r.push(e.name+": '"+e.value+"'"):e.required&&r.push(e.name+": '...'")})),r.length>0&&(o+=" | ",o+=r.join(", "))}return o+" }}"},restrict_parameter_chars:function(e){if(-1!==a.inArray(e.which,[39,123,124,125]))return!1}},AutomateWoo.Variables.init()}));
//# sourceMappingURL=variables.min.js.map
